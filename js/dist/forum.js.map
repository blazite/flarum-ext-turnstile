{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,wC,aCAxD,SAASC,EAAgBC,EAAGC,GAC1B,OAAOF,EAAkBZ,OAAOe,eAAiBf,OAAOe,eAAeC,OAAS,SAAUH,EAAGC,GAC3F,OAAOD,EAAEI,UAAYH,EAAGD,CAC1B,EAAGD,EAAgBC,EAAGC,EACxB,CCJA,MAAM,EAA+BL,OAAOC,KAAKC,OAAO,oB,ICEnCO,EAAS,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KCD9B,IAAwBR,EAAGd,IDCGoB,GCDNN,EDCMK,GCA1BZ,UAAYN,OAAOsB,OAAOvB,EAAEO,WAAYO,EAAEP,UAAUiB,YAAcV,EAAGE,EAAeF,EAAGd,GDA7D,IAAAyB,EAAAN,EAAAZ,UAY3B,OAZ2BkB,EAC5BC,SAAA,SAASC,GACPP,EAAAb,UAAMmB,SAAQjB,KAAC,KAAAkB,GACfC,KAAKC,MAAMC,MAAMC,OAAOJ,EAAMK,IAAIC,cAAc,iBAClD,EAACR,EAEDS,KAAA,WACE,OACEC,EAAA,OAAKC,UAAU,cACbD,EAAA,OAAKC,UAAU,iBAGrB,EAACjB,CAAA,CAZ2B,C,MAASkB,IEFvC,MAAM,EAA+B3B,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,wC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCEnC0B,EAAc,WAMjC,SAAAA,EAAYC,EAAUC,GAAe,KALrCC,MAAQ,KAAI,KACZC,cAAWC,EAAS,KACpBJ,cAAQ,OACRC,mBAAa,EAGXZ,KAAKW,SAAWA,EAChBX,KAAKY,cAAgBA,CACvB,CAAC,IAAAf,EAAAa,EAAA/B,UAuCA,OAvCAkB,EAEDM,OAAA,SAAOa,GAAS,IAAAC,EAAA,KACTC,OAAOC,YAEZnB,KAAKc,SAAWI,OAAOC,UAAUhB,OAAOa,EAAS,CAC/CI,QAASC,IAAAA,MAAUC,UAAU,8BAC7BC,MAAOF,IAAAA,MAAUC,UAAU,uBAAyB,OAAS,QAC7DE,KAAM,SACNb,SAAU,SAACE,GACTI,EAAKJ,MAAQA,EACbI,EAAKN,SAASE,EAChB,EACA,mBAAoB,WAClBI,EAAKJ,MAAQ,IACf,EACA,iBAAkB,WAChBI,EAAKJ,MAAQ,KACbI,EAAKL,cAAc,CACjBa,KAAM,QACNC,QAASL,IAAAA,WAAeM,MAAM,kCAElC,IAEJ,EAAC9B,EAED+B,YAAA,WACE,OAAO5B,KAAKa,KACd,EAAChB,EAEDgC,MAAA,WACM7B,KAAKc,WACPI,OAAOC,UAAUU,MAAM7B,KAAKc,UAC5Bd,KAAKa,MAAQ,KAEjB,EAAChB,EAEDiC,QAAA,WACE,YAAmC,IAArBZ,OAAOC,SACvB,EAACT,CAAA,CAhDgC,GCFnC,MAAM,EAA+B5B,OAAOC,KAAKC,OAAO,gC,aCMxDqC,IAAAA,aAAiBU,IAAI,4BAA4B,WCAlC,IACPC,GCDNC,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,cAAc,SAAUC,GAC/Cd,IAAAA,MAAUC,UAAU,8BACzBa,EAAKC,eAAiBpC,KAAKqC,iBAC7B,KAEAJ,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,UAAU,SAAUI,GAAQ,IAAArB,EAAA,KACnDI,IAAAA,MAAUC,UAAU,8BAEzBtB,KAAKmB,UAAY,KAEjBmB,EAAOP,IACL,YACAxB,EAAChB,EAAS,CACRgD,OAAO,UACPC,WAAYxC,KACZyC,uBAAwB,SAAC5B,GACvBI,EAAKoB,iBAAmBxB,CAC1B,KAED,GAEL,KAEAoB,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,WAAW,SAAUQ,EAAGC,GAAO,IAAAC,EACtDvB,IAAAA,MAAUC,UAAU,8BAEP,OAAlBsB,EAAI5C,KAAKmB,YAALyB,EAAgBf,OAClB7B,KAAKmB,UAAUU,SAGbc,EAAME,OAAWF,EAAME,MAAMnB,SAAYiB,EAAME,MAAMnB,QAAQoB,SAC/DH,EAAME,MAAMnB,QACVL,IAAAA,WAAeM,MAAM,6CACrB,4CAGJ3B,KAAK+C,WAAaJ,EAAME,MACxBtC,EAAEyC,SACFhD,KAAKiD,UACP,IDtCMjB,EAAY,WAAH,QAAWX,IAAAA,MAAUC,UAAU,2BAA2B,GAEzEW,EAAAA,EAAAA,QAAOiB,IAAAA,UAAsB,UAAU,WAAY,IAAAjC,EAAA,KAC5Ce,MAELhC,KAAKmB,UAAY,IAAIT,GACnB,WAAO,IACP,SAACqC,GACC9B,EAAKkC,SACLlC,EAAK8B,WAAaA,CACpB,IAEJ,KAEAd,EAAAA,EAAAA,QAAOiB,IAAAA,UAAsB,eAAe,SAAUf,GAC/CH,MACLG,EAAKC,eAAiBpC,KAAKmB,UAAUS,cACvC,KAEAK,EAAAA,EAAAA,QAAOiB,IAAAA,UAAsB,UAAU,SAAUZ,GAC1CN,KAELM,EAAOP,IACL,YACAxB,EAAChB,EAAS,CAACW,MAAOF,KAAKmB,aACtB,EAEL,KAEAc,EAAAA,EAAAA,QAAOiB,IAAAA,UAAsB,WAAW,SAAUR,EAAGC,GAC9CX,MACLhC,KAAKmB,UAAUU,SAEXc,EAAME,OAAWF,EAAME,MAAMnB,SAAYiB,EAAME,MAAMnB,QAAQoB,SAC/DH,EAAME,MAAMnB,QAAUL,IAAAA,WAAeM,MAAM,6CAE/C,KErCAM,EAAAA,EAAAA,QAAOmB,IAAAA,UAA+B,iBAAiB,SAAUjB,GAC1Dd,IAAAA,MAAUC,UAAU,8BACzBa,EAAKC,eAAiBpC,KAAKqC,iBAC7B,KAEAJ,EAAAA,EAAAA,QAAOmB,IAAAA,UAA+B,UAAU,SAAUd,GAAQ,IAAArB,EAAA,KAC3DI,IAAAA,MAAUC,UAAU,8BAEzBtB,KAAKmB,UAAY,KAEjBmB,EAAOP,IACL,YACAxB,EAAChB,EAAS,CACRgD,OAAO,YACPC,WAAYxC,KACZyC,uBAAwB,SAAC5B,GACvBI,EAAKoB,iBAAmBxB,CAC1B,KAED,GAEL,KAEAoB,EAAAA,EAAAA,QAAOmB,IAAAA,UAA+B,WAAW,SAAUV,EAAGC,GAAO,IAAAC,EAC9DvB,IAAAA,MAAUC,UAAU,8BAEP,OAAlBsB,EAAI5C,KAAKmB,YAALyB,EAAgBf,OAClB7B,KAAKmB,UAAUU,SAGbc,EAAME,OAAWF,EAAME,MAAMnB,SAAYiB,EAAME,MAAMnB,QAAQoB,SAC/DH,EAAME,MAAMnB,QACVL,IAAAA,WAAeM,MAAM,6CACrB,0CAGJ3B,KAAK+C,WAAaJ,EAAME,MACxBtC,EAAEyC,SACFhD,KAAKiD,UACP,ICtCAI,IAAAA,UAA8BhB,iBAAmB,MAEjDJ,EAAAA,EAAAA,QAAOoB,IAAAA,UAA+B,UAAU,WAC9CrD,KAAKsD,SAAU,CACjB,KAEAC,EAAAA,EAAAA,UAASF,IAAAA,UAA+B,WAAW,SAAqCG,GAAU,IAAAvC,EAAA,KAChG,OAAKI,IAAAA,MAAUC,UAAU,6BAEzBtB,KAAKmB,UAAY,KAGfZ,EAAA,OAAKC,UAAU,cACbD,EAAA,OAAKC,UAAU,uBACbD,EAAA,KAAGC,UAAU,YAAYa,IAAAA,WAAeM,MAAM,oCAC9CpB,EAAA,OAAKC,UAAU,cACZiD,IAAAA,UACC,CACEjD,UAAW,uCACXiB,KAAM,SACN6B,QAAStD,KAAKsD,QACdI,SAAU1D,KAAKsD,SAEjBjC,IAAAA,WAAeM,MAAM,4CAGzBpB,EAAChB,EAAS,CACRgD,OAAO,YACPC,WAAYxC,KACZyC,uBAAwB,SAAC5B,GACvBI,EAAKoB,iBAAmBxB,EACxBI,EAAKqC,SAAU,EACf/C,EAAEyC,QACJ,OA1BqDQ,GA+B/D,KAEAD,EAAAA,EAAAA,UAASF,IAAAA,UAA+B,YAAY,SAAqCG,EAAUrE,GAAgB,IAAAwE,EAAA,KACjH,IAAKtC,IAAAA,MAAUC,UAAU,4BAA6B,OAAOkC,EAAS3E,KAAKmB,KAAMb,GAEjFA,EAAEyE,iBACF5D,KAAKsD,SAAU,EAEfjC,IAAAA,QAAY,CACVwC,OAAQ,OACRC,IAAKzC,IAAAA,MAAUC,UAAU,UAAY,UACrCyC,KAAM,CACJC,MAAO3C,IAAAA,QAAY4C,KAAMD,QACzB5B,eAAgBpC,KAAKqC,oBAEtB6B,KAAKlE,KAAKmE,KAAK9E,KAAKW,OAAM,OAAO,SAAC2C,GAAU,IAAAyB,EAC3B,OAAlBA,EAAIT,EAAKxC,YAALiD,EAAgBvC,OAClB8B,EAAKxC,UAAUU,SAGbc,EAAME,OAAWF,EAAME,MAAMnB,SAAYiB,EAAME,MAAMnB,QAAQoB,SAC/DH,EAAME,MAAMnB,QACVL,IAAAA,WAAeM,MAAM,6CACrB,4CAGJgC,EAAKZ,WAAaJ,EAAME,MACxBc,EAAKL,SAAU,EACf/C,EAAEyC,SACFW,EAAKV,SACP,GACF,GJjEF,G","sources":["webpack://blazite-flarum-turnstile/webpack/bootstrap","webpack://blazite-flarum-turnstile/webpack/runtime/compat get default export","webpack://blazite-flarum-turnstile/webpack/runtime/define property getters","webpack://blazite-flarum-turnstile/webpack/runtime/hasOwnProperty shorthand","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['forum/app']\"","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['common/extend']\"","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['forum/components/ForgotPasswordModal']\"","webpack://blazite-flarum-turnstile/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['common/Component']\"","webpack://blazite-flarum-turnstile/./src/forum/components/Turnstile.tsx","webpack://blazite-flarum-turnstile/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['common/components/Button']\"","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['forum/components/ChangePasswordModal']\"","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://blazite-flarum-turnstile/./src/common/states/TurnstileState.ts","webpack://blazite-flarum-turnstile/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://blazite-flarum-turnstile/./src/forum/index.ts","webpack://blazite-flarum-turnstile/./src/forum/extend/addTurnstileToLogin.tsx","webpack://blazite-flarum-turnstile/./src/forum/extend/addTurnstileToSignUp.tsx","webpack://blazite-flarum-turnstile/./src/forum/extend/addTurnstileToForgotPassword.tsx","webpack://blazite-flarum-turnstile/./src/forum/extend/addTurnstileToChangePassword.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ForgotPasswordModal'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\n\nexport default class Turnstile extends Component<{ state: any }> {\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    this.attrs.state.render(vnode.dom.querySelector('.cf-turnstile'));\n  }\n\n  view() {\n    return (\n      <div className=\"Form-group\">\n        <div className=\"cf-turnstile\" />\n      </div>\n    );\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ChangePasswordModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","import app from 'flarum/forum/app';\r\n\r\nexport default class TurnstileState {\r\n  token = null;\r\n  widgetId = undefined;\r\n  callback;\r\n  errorCallback;\r\n\r\n  constructor(callback, errorCallback) {\r\n    this.callback = callback;\r\n    this.errorCallback = errorCallback;\r\n  }\r\n\r\n  render(element) {\r\n    if (!window.turnstile) return;\r\n\r\n    this.widgetId = window.turnstile.render(element, {\r\n      sitekey: app.forum.attribute('blazite-turnstile.site_key'),\r\n      theme: app.forum.attribute('turnstile_dark_mode') ? 'dark' : 'light',\r\n      size: 'normal',\r\n      callback: (token) => {\r\n        this.token = token;\r\n        this.callback(token);\r\n      },\r\n      'expired-callback': () => {\r\n        this.token = null;\r\n      },\r\n      'error-callback': () => {\r\n        this.token = null;\r\n        this.errorCallback({\r\n          type: 'error',\r\n          content: app.translator.trans('blazite-turnstile.forum.error'),\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  getResponse() {\r\n    return this.token;\r\n  }\r\n\r\n  reset() {\r\n    if (this.widgetId) {\r\n      window.turnstile.reset(this.widgetId);\r\n      this.token = null;\r\n    }\r\n  }\r\n\r\n  isReady() {\r\n    return typeof window.turnstile !== 'undefined';\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SignUpModal'];","import app from 'flarum/forum/app';\nimport addTurnstileToForgotPassword from './extend/addTurnstileToForgotPassword';\nimport addTurnstileToChangePassword from './extend/addTurnstileToChangePassword';\nimport addTurnstileToLogin from './extend/addTurnstileToLogin';\nimport addTurnstileToSignUp from './extend/addTurnstileToSignUp';\n\napp.initializers.add('blazite/flarum-turnstile', () => {\n  addTurnstileToSignUp();\n  addTurnstileToLogin();\n  addTurnstileToForgotPassword();\n  addTurnstileToChangePassword();\n});\n","import app from 'flarum/forum/app';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport { extend, override } from 'flarum/common/extend';\nimport TurnstileState from '../../common/states/TurnstileState';\nimport Turnstile from '../components/Turnstile';\n\nexport default function addTurnstileToLogin() {\n  const isEnabled = () => !!app.forum.attribute('blazite-turnstile.signin');\n\n  extend(LogInModal.prototype, 'oninit', function () {\n    if (!isEnabled()) return;\n\n    this.turnstile = new TurnstileState(\n      () => {}, // Success callback — not needed unless you want behavior\n      (alertAttrs) => {\n        this.loaded();\n        this.alertAttrs = alertAttrs;\n      }\n    );\n  });\n\n  extend(LogInModal.prototype, 'loginParams', function (data) {\n    if (!isEnabled()) return;\n    data.turnstileToken = this.turnstile.getResponse();\n  });\n\n  extend(LogInModal.prototype, 'fields', function (fields) {\n    if (!isEnabled()) return;\n\n    fields.add(\n      'turnstile',\n      <Turnstile state={this.turnstile} />,\n      -5\n    );\n  });\n\n  extend(LogInModal.prototype, 'onerror', function (_, error) {\n    if (!isEnabled()) return;\n    this.turnstile.reset();\n\n    if (error.alert && (!error.alert.content || !error.alert.content.length)) {\n      error.alert.content = app.translator.trans('blazite-turnstile.forum.validation_error');\n    }\n  });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport SignUpModal from 'flarum/forum/components/SignUpModal';\nimport Turnstile from '../components/Turnstile';\n\nexport default function addTurnstileToSignUp() {\n  extend(SignUpModal.prototype, 'submitData', function (data) {\n    if (!app.forum.attribute('blazite-turnstile.signup')) return;\n    data.turnstileToken = this.__turnstileToken;\n  });\n\n  extend(SignUpModal.prototype, 'fields', function (fields) {\n    if (!app.forum.attribute('blazite-turnstile.signup')) return;\n\n    this.turnstile = null;\n\n    fields.add(\n      'turnstile',\n      <Turnstile\n        action=\"sign_up\"\n        bindParent={this}\n        onTurnstileStateChange={(token) => {\n          this.__turnstileToken = token;\n        }}\n      />,\n      -5\n    );\n  });\n\n  extend(SignUpModal.prototype, 'onerror', function (_, error) {\n    if (!app.forum.attribute('blazite-turnstile.signup')) return;\n\n    if (this.turnstile?.reset) {\n      this.turnstile.reset();\n    }\n\n    if (error.alert && (!error.alert.content || !error.alert.content.length)) {\n      error.alert.content =\n        app.translator.trans('blazite-turnstile.forum.validation_error') ||\n        'Please complete the Turnstile challenge.';\n    }\n\n    this.alertAttrs = error.alert;\n    m.redraw();\n    this.onready();\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport ForgotPasswordModal from 'flarum/forum/components/ForgotPasswordModal';\nimport Turnstile from '../components/Turnstile';\n\nexport default function addTurnstileToForgotPassword() {\n  extend(ForgotPasswordModal.prototype, 'requestParams', function (data) {\n    if (!app.forum.attribute('blazite-turnstile.forgot')) return;\n    data.turnstileToken = this.__turnstileToken;\n  });\n\n  extend(ForgotPasswordModal.prototype, 'fields', function (fields) {\n    if (!app.forum.attribute('blazite-turnstile.forgot')) return;\n\n    this.turnstile = null;\n\n    fields.add(\n      'turnstile',\n      <Turnstile\n        action=\"forgot_pw\"\n        bindParent={this}\n        onTurnstileStateChange={(token) => {\n          this.__turnstileToken = token;\n        }}\n      />,\n      -5\n    );\n  });\n\n  extend(ForgotPasswordModal.prototype, 'onerror', function (_, error) {\n    if (!app.forum.attribute('blazite-turnstile.forgot')) return;\n\n    if (this.turnstile?.reset) {\n      this.turnstile.reset();\n    }\n\n    if (error.alert && (!error.alert.content || !error.alert.content.length)) {\n      error.alert.content =\n        app.translator.trans('blazite-turnstile.forum.validation_error') ||\n        'Please complete the CAPTCHA challenge.';\n    }\n\n    this.alertAttrs = error.alert;\n    m.redraw();\n    this.onready();\n  });\n}\n","import app from 'flarum/forum/app';\nimport { override, extend } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport ChangePasswordModal from 'flarum/forum/components/ChangePasswordModal';\nimport Turnstile from '../components/Turnstile';\n\nexport default function addTurnstileToChangePassword() {\n  ChangePasswordModal.prototype.__turnstileToken = null;\n\n  extend(ChangePasswordModal.prototype, 'oninit', function (this: ChangePasswordModal) {\n    this.loading = true;\n  });\n\n  override(ChangePasswordModal.prototype, 'content', function (this: ChangePasswordModal, original) {\n    if (!app.forum.attribute('blazite-turnstile.forgot')) return original();\n\n    this.turnstile = null;\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <p className=\"helpText\">{app.translator.trans('core.forum.change_password.text')}</p>\n          <div className=\"Form-group\">\n            {Button.component(\n              {\n                className: 'Button Button--primary Button--block',\n                type: 'submit',\n                loading: this.loading,\n                disabled: this.loading,\n              },\n              app.translator.trans('core.forum.change_password.send_button')\n            )}\n          </div>\n          <Turnstile\n            action=\"forgot_pw\"\n            bindParent={this}\n            onTurnstileStateChange={(token) => {\n              this.__turnstileToken = token;\n              this.loading = false;\n              m.redraw();\n            }}\n          />\n        </div>\n      </div>\n    );\n  });\n\n  override(ChangePasswordModal.prototype, 'onsubmit', function (this: ChangePasswordModal, original, e: SubmitEvent) {\n    if (!app.forum.attribute('blazite-turnstile.forgot')) return original.call(this, e);\n\n    e.preventDefault();\n    this.loading = true;\n\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/forgot',\n      body: {\n        email: app.session.user!.email(),\n        turnstileToken: this.__turnstileToken,\n      },\n    }).then(this.hide.bind(this)).catch((error) => {\n      if (this.turnstile?.reset) {\n        this.turnstile.reset();\n      }\n\n      if (error.alert && (!error.alert.content || !error.alert.content.length)) {\n        error.alert.content =\n          app.translator.trans('blazite-turnstile.forum.validation_error') ||\n          'Please complete the Turnstile challenge.';\n      }\n\n      this.alertAttrs = error.alert;\n      this.loading = false;\n      m.redraw();\n      this.onready();\n    });\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","Turnstile","_Component","apply","arguments","create","constructor","_proto","oncreate","vnode","this","attrs","state","render","dom","querySelector","view","m","className","Component","TurnstileState","callback","errorCallback","token","widgetId","undefined","element","_this","window","turnstile","sitekey","app","attribute","theme","size","type","content","trans","getResponse","reset","isReady","add","isEnabled","extend","SignUpModal","data","turnstileToken","__turnstileToken","fields","action","bindParent","onTurnstileStateChange","_","error","_this$turnstile","alert","length","alertAttrs","redraw","onready","LogInModal","loaded","ForgotPasswordModal","ChangePasswordModal","loading","override","original","Button","disabled","_this2","preventDefault","method","url","body","email","user","then","hide","_this2$turnstile"],"sourceRoot":""}